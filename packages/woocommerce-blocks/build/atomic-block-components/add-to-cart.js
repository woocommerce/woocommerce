(window.webpackWcBlocksJsonp=window.webpackWcBlocksJsonp||[]).push([[10],{356:function(t,e,n){"use strict";e.a={showFormElements:{type:"boolean",default:!1}}},357:function(t,e,n){"use strict";var c=n(18),a=n.n(c),r=n(0),o=(n(2),n(7)),u=n.n(o),i=n(11),l=n.n(i),s=n(802),b=n(490),m=Object(r.createContext)({product:{},productId:0,variationId:0,variationData:{},cartItemData:{},quantity:1,minQuantity:1,maxQuantity:99,quantityInCart:0,setQuantity:function(t){},setVariationId:function(t){},setVariationData:function(t){},setCartItemData:function(t){},showFormElements:!1,formInitialized:!1,formDisabled:!0,formSubmitting:!1,onChange:function(){},onSubmit:function(){},onSuccess:function(){},onFail:function(){}}),d=function(){return Object(r.useContext)(m)},p=function(t){var e=t.children,n=t.product,c=t.showFormElements,a=n.id||0,o=Object(r.useState)(0),u=l()(o,2),i=u[0],d=u[1],p=Object(r.useState)({}),O=l()(p,2),j=O[0],v=O[1],h=Object(r.useState)({}),E=l()(h,2),g=E[0],w=E[1],y=Object(r.useState)(1),k=l()(y,2),_=k[0],C=k[1],N=Object(s.a)(a),S=N.addToCart,D=N.addingToCart,x=N.cartQuantity,I=N.cartIsLoading;!function(t){var e=Object(r.useRef)(!0);Object(r.useEffect)((function(){e.current?e.current=!1:Object(b.b)()}),[t])}(x);var F=!I&&a>0,Q=D||!F||!f(n),P=Object(r.useCallback)((function(){S(_)}),[S,_]),q=Object(r.useCallback)((function(){}),[]),A=Object(r.useCallback)((function(){}),[]),T=Object(r.useCallback)((function(){}),[]),B={product:n,productId:a,variationId:i,variationData:j,cartItemData:g,quantity:_,minQuantity:1,maxQuantity:n.quantity_limit||99,quantityInCart:x,setQuantity:C,setVariationId:d,setVariationData:v,setCartItemData:w,showFormElements:c,formInitialized:F,formDisabled:Q,formSubmitting:D,onChange:q,onSubmit:P,onSuccess:A,onFail:T};return Object(r.createElement)(m.Provider,{value:B},e)},f=function(t){var e=t.is_purchasable;return void 0!==e&&e},O=n(42),j=n(6),v=(n(355),n(1)),h=n(96),E=n(59),g=n(536),w=function(t){var e=t.className,n=t.href,c=t.text;return Object(r.createElement)(h.a,{className:e,href:n,rel:"nofollow"},c)},y=function(t){var e=t.className,n=t.quantityInCart,c=t.loading,a=t.disabled,o=t.onClick,u=Object(r.useState)(!1),i=l()(u,2),s=i[0],b=i[1];return Object(r.createElement)(h.a,{className:e,disabled:a,showSpinner:c,onClick:function(){o(),b(!0)}},n>0?Object(v.sprintf)(Object(v._n)("%d in cart","%d in cart",n,'woocommerce'),n):Object(v.__)("Add to cart",'woocommerce'),s&&Object(r.createElement)(E.a,{srcElement:g.a,alt:Object(v.__)("Done",'woocommerce')}))},k=function(){var t=d(),e=t.showFormElements,n=t.product,c=t.quantityInCart,a=t.formDisabled,o=t.formSubmitting,u=t.onSubmit,i=n.is_purchasable,l=void 0===i||i,s=n.has_options,b=n.add_to_cart,m=void 0===b?{url:"",text:""}:b;return!e&&s||!l?Object(r.createElement)(w,{className:"wc-block-components-product-add-to-cart-button",href:m.url,text:m.text||Object(v.__)("View Product",'woocommerce')}):Object(r.createElement)(y,{className:"wc-block-components-product-add-to-cart-button",quantityInCart:c,disabled:a,loading:o,onClick:u})},_=function(t){var e=t.disabled,n=t.min,c=t.max,a=t.value,o=t.onChange;return Object(r.createElement)("input",{className:"wc-block-components-product-add-to-cart-quantity",type:"number",value:a,min:n,max:c,hidden:1===c,disabled:e,onChange:function(t){o(t.target.value)}})},C=function(t){var e=t.reason,n=void 0===e?Object(v.__)("Sorry, this product cannot be purchased.",'woocommerce'):e;return Object(r.createElement)("div",{className:"wc-block-components-product-add-to-cart-unavailable"},n)},N=function(){var t=d(),e=t.product,n=t.quantity,c=t.minQuantity,a=t.maxQuantity,o=t.setQuantity,u=t.formDisabled;return e.id&&!e.is_purchasable?Object(r.createElement)(C,null):e.id&&!e.is_in_stock?Object(r.createElement)(C,{reason:Object(v.__)("This product is currently out of stock and cannot be purchased.",'woocommerce')}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(_,{value:n,min:c,max:a,disabled:u,onChange:o}),Object(r.createElement)(k,null))},S=(n(537),n(8)),D=n.n(S),x=n(64),I=n.n(x),F=n(33),Q=n(4),P={value:"",label:Object(v.__)("Select an option",'woocommerce')},q=function(t){var e=t.attributeName,n=t.options,c=void 0===n?[]:n,a=t.selected,o=void 0===a?"":a,u=t.onChange,i=void 0===u?function(){}:u;return Object(r.createElement)(Q.SelectControl,{className:"wc-block-components-product-add-to-cart-attribute-picker__select",label:Object(F.decodeEntities)(e),value:o||"",options:[P].concat(I()(c)),onChange:i})},A=function(t){var e=t.selectedAttributes,n=t.variationAttributes,c=t.attributeNames;return Object.keys(n).filter((function(t){return c.every((function(c){var a=e[c]||"",r=n[t][c];return""===a||(null===r||r===a)}))}))};function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);e&&(c=c.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,c)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){D()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var V=function(t){var e=t.attributes,n=t.variationAttributes,c=Object(r.useState)(0),a=l()(c,2),o=a[0],u=a[1],i=Object(r.useState)([]),s=l()(i,2),b=s[0],m=s[1],d=Object.keys(e),p=Object.values(b).filter(Boolean).length>0,f=Object.values(b).filter((function(t){return""!==t})).length===d.length,O=Object(r.useMemo)((function(){var t=[];return d.forEach((function(c){var a=e[c],r=d.filter((function(t){return t!==c})),o=p?A({selectedAttributes:b,variationAttributes:n,attributeNames:r}):null,u=null!==o?o.map((function(t){return n[t][c]})):null;t[c]=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object.values(t).map((function(t){var n=t.name,c=t.slug;return null===e||e.includes(null)||e.includes(c)?{value:c,label:n}:null})).filter(Boolean)}(a.terms,u)})),t}),[e,n,d,b,p]);return Object(r.useEffect)((function(){if(f){var t=A({selectedAttributes:b,variationAttributes:n,attributeNames:d});u(t[0]||0)}else u(0)}),[b,n,d,f]),Object(r.createElement)("div",{className:"wc-block-components-product-add-to-cart-attribute-picker"},d.map((function(t){return Object(r.createElement)(q,{key:t,attributeName:t,options:O[t],selected:b[t],onChange:function(e){m(B(B({},b),{},D()({},t,e)))}})})),Object(r.createElement)("p",null,"Matched variation ID: ",o))},z=function(t){var e=t.product,n=e.attributes,c=void 0===n?{}:n,a=e.variations,o=void 0===a?[]:a,u=function(t){return t?Object(j.keyBy)(Object.values(t).filter((function(t){return t.has_variations})),"name"):[]}(c),i=function(t){if(!t)return{};var e={};return t.forEach((function(t){var n=t.id,c=t.attributes;e[n]=c.reduce((function(t,e){var n=e.name,c=e.value;return t[n]=c,t}),[])})),e}(o);return 0===Object.keys(u).length||0===i.length?null:Object(r.createElement)(V,{attributes:u,variationAttributes:i})},L=function(){var t=d(),e=t.product,n=t.quantity,c=t.minQuantity,a=t.maxQuantity,o=t.setQuantity,u=t.formDisabled;return e.id&&!e.is_purchasable?Object(r.createElement)(C,null):e.id&&!e.is_in_stock?Object(r.createElement)(C,{reason:Object(v.__)("This product is currently out of stock and cannot be purchased.",'woocommerce')}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(z,{product:e}),Object(r.createElement)(_,{value:n,min:c,max:a,disabled:u,onChange:o}),Object(r.createElement)(k,null))},M=function(){return Object(r.createElement)(k,null)},J=function(){return Object(r.createElement)(Q.Placeholder,{className:"wc-block-components-product-add-to-cart-group-list"},"This is a placeholder for the grouped products form element.")},W=function(){return Object(r.createElement)(J,null)},G=function(t){var e=t.productType;return"variable"===e?Object(r.createElement)(L,null):"grouped"===e?Object(r.createElement)(W,null):"external"===e?Object(r.createElement)(M,null):"simple"===e||"variation"===e?Object(r.createElement)(N,null):null};e.a=function(t){var e=t.className,n=t.showFormElements,c=a()(t,["className","showFormElements"]),o=Object(O.useProductDataContext)(),i=c.product||o.product||{},l=u()(e,"wc-block-components-product-add-to-cart",{"wc-block-components-product-add-to-cart--placeholder":Object(j.isEmpty)(i)});return Object(r.createElement)(p,{product:i,showFormElements:n},Object(r.createElement)("div",{className:l},Object(r.createElement)(r.Fragment,null,n?Object(r.createElement)(G,{productType:i.type||"simple"}):Object(r.createElement)(k,null))))}},536:function(t,e,n){"use strict";var c=n(0),a=n(57),r=Object(c.createElement)(a.a,{xmlns:"http://www.w3.org/2000/SVG",viewBox:"0 0 24 24"},Object(c.createElement)("path",{fill:"none",d:"M0 0h24v24H0z"}),Object(c.createElement)("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}));e.a=r},911:function(t,e,n){"use strict";n.r(e);var c=n(27),a=n(908),r=n(357),o=n(356);e.default=Object(c.compose)(Object(a.a)(o.a))(r.a)},96:function(t,e,n){"use strict";var c=n(10),a=n.n(c),r=n(18),o=n.n(r),u=n(0),i=n(253),l=(n(2),n(7)),s=n.n(l);n(286);e.a=function(t){var e=t.className,n=t.showSpinner,c=void 0!==n&&n,r=t.children,l=o()(t,["className","showSpinner","children"]),b=s()("wc-block-components-button",e,{"wc-block-components-button--loading":c});return Object(u.createElement)(i.a,a()({className:b},l),c&&Object(u.createElement)("span",{className:"wc-block-components-button__spinner","aria-hidden":"true"}),Object(u.createElement)("span",{className:"wc-block-components-button__text"},r))}}}]);
