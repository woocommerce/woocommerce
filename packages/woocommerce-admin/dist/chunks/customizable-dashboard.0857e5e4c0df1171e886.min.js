(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{119:function(e,t,n){"use strict";var r=n(27),o=n(16),c=n(0);t.a=function(e){var t=e.as,n=void 0===t?"div":t,a=Object(o.a)(e,["as"]);return function(e){var t=e.as,n=void 0===t?"div":t,r=Object(o.a)(e,["as"]);return"function"==typeof r.children?r.children(r):Object(c.createElement)(n,r)}(Object(r.a)({as:n,className:"components-visually-hidden"},a))}},171:function(e,t,n){"use strict";var r=n(0),o=n(10),c=n.n(o),a=n(119);function i(e){var t=e.id,n=e.label,o=e.hideLabelFromVision,s=e.help,l=e.className,u=e.children;return Object(r.createElement)("div",{className:c()("components-base-control",l)},Object(r.createElement)("div",{className:"components-base-control__field"},n&&t&&(o?Object(r.createElement)(a.a,{as:"label",htmlFor:t},n):Object(r.createElement)("label",{className:"components-base-control__label",htmlFor:t},n)),n&&!t&&(o?Object(r.createElement)(a.a,{as:"label"},n):Object(r.createElement)(i.VisualLabel,null,n)),u),!!s&&Object(r.createElement)("p",{id:t+"__help",className:"components-base-control__help"},s))}i.VisualLabel=function(e){var t=e.className,n=e.children;return t=c()("components-base-control__label",t),Object(r.createElement)("span",{className:t},n)},t.a=i},173:function(e,t,n){"use strict";var r=n(11),o=n(0),c=n(53),a=new WeakMap;function i(e){return Object(o.useMemo)((function(){return function(e){var t=a.get(e)||0;return a.set(e,t+1),t}(e)}),[e])}t.a=Object(c.a)((function(e){return function(t){var n=i(e);return Object(o.createElement)(e,Object(r.a)({},t,{instanceId:n}))}}),"withInstanceId")},711:function(e,t,n){"use strict";var r=n(11),o=n(7),c=n(6),a=n(8),i=n(4),s=n(5),l=n(9),u=n(0),d=n(10),p=n.n(d),b=n(92),f=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(a.a)(this,Object(i.a)(t).apply(this,arguments))).toggle=e.toggle.bind(Object(s.a)(e)),e.close=e.close.bind(Object(s.a)(e)),e.closeIfFocusOutside=e.closeIfFocusOutside.bind(Object(s.a)(e)),e.containerRef=Object(u.createRef)(),e.state={isOpen:!1},e}return Object(l.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){var e=this.state.isOpen,t=this.props.onToggle;e&&t&&t(!1)}},{key:"componentDidUpdate",value:function(e,t){var n=this.state.isOpen,r=this.props.onToggle;t.isOpen!==n&&r&&r(n)}},{key:"toggle",value:function(){this.setState((function(e){return{isOpen:!e.isOpen}}))}},{key:"closeIfFocusOutside",value:function(){this.containerRef.current.contains(document.activeElement)||document.activeElement.closest('[role="dialog"]')||this.close()}},{key:"close",value:function(){this.props.onClose&&this.props.onClose(),this.setState({isOpen:!1})}},{key:"render",value:function(){var e=this.state.isOpen,t=this.props,n=t.renderContent,o=t.renderToggle,c=t.position,a=void 0===c?"bottom":c,i=t.className,s=t.contentClassName,l=t.expandOnMobile,d=t.headerTitle,f=t.focusOnMount,m=t.popoverProps,h={isOpen:e,onToggle:this.toggle,onClose:this.close};return Object(u.createElement)("div",{className:p()("components-dropdown",i),ref:this.containerRef},o(h),e&&Object(u.createElement)(b.a,Object(r.a)({className:s,position:a,onClose:this.close,onFocusOutside:this.closeIfFocusOutside,expandOnMobile:l,headerTitle:d,focusOnMount:f},m),n(h)))}}]),t}(u.Component);t.a=f},712:function(e,t,n){"use strict";var r=n(11),o=n(16),c=n(0),a=n(173),i=n(171);t.a=Object(a.a)((function(e){var t=e.label,n=e.hideLabelFromVision,a=e.value,s=e.help,l=e.className,u=e.instanceId,d=e.onChange,p=e.type,b=void 0===p?"text":p,f=Object(o.a)(e,["label","hideLabelFromVision","value","help","className","instanceId","onChange","type"]),m="inspector-text-control-".concat(u);return Object(c.createElement)(i.a,{label:t,hideLabelFromVision:n,id:m,help:s,className:l},Object(c.createElement)("input",Object(r.a)({className:"components-text-control__input",type:b,id:m,value:a,onChange:function(e){return d(e.target.value)},"aria-describedby":s?m+"__help":void 0},f)))}))},745:function(e,t,n){"use strict";var r=n(15),o=n.n(r),c=n(41),a=n.n(c),i=n(40),s=n.n(i),l=n(59),u=n.n(l),d=n(44),p=n.n(d),b=n(29),f=n.n(b),m=n(42),h=n.n(m),v=n(0),O=n(1),y=n.n(O),_=n(2),j=n(19),k=n(63),g=n(26),w=n(51),E=n(79),S=n(104),D=n(203);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}var C=function(e){h()(n,e);var t=T(n);function n(){var e;return a()(this,n),(e=t.call(this)).trackDateSelect=e.trackDateSelect.bind(u()(e)),e.trackFilterSelect=e.trackFilterSelect.bind(u()(e)),e.trackAdvancedFilterAction=e.trackAdvancedFilterAction.bind(u()(e)),e}return s()(n,[{key:"trackDateSelect",value:function(e){var t=this.props.report;Object(E.b)("datepicker_update",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({report:t},Object(_.omitBy)(e,_.isUndefined)))}},{key:"trackFilterSelect",value:function(e){var t=this.props.report;Object(E.b)("analytics_filter",{report:t,filter:e.filter||"all"})}},{key:"trackAdvancedFilterAction",value:function(e,t){var n=this.props.report;switch(e){case"add":Object(E.b)("analytics_filters_add",{report:n,filter:t.key});break;case"remove":Object(E.b)("analytics_filters_remove",{report:n,filter:t.key});break;case"filter":var r=Object.keys(t).reduce((function(e,n){return e[Object(_.snakeCase)(n)]=t[n],e}),{});Object(E.b)("analytics_filters_filter",{report:n,snakeCaseData:r});break;case"clear_all":Object(E.b)("analytics_filters_clear_all",{report:n});break;case"match":Object(E.b)("analytics_filters_all_any",{report:n,value:t.match})}}},{key:"render",value:function(){var e=this.props,t=e.advancedFilters,n=e.filters,r=e.path,o=e.query,c=e.showDatePicker,a=e.defaultDateRange,i=Object(S.h)(o,a),s=i.period,l=i.compare,u=i.before,d=i.after,p=Object(S.f)(o,a),b={period:s,compare:l,before:u,after:d,primaryDate:p.primary,secondaryDate:p.secondary},f=this.context;return Object(v.createElement)(k.ReportFilters,{query:o,siteLocale:g.c.siteLocale,currency:f,path:r,filters:n,advancedFilters:t,showDatePicker:c,onDateSelect:this.trackDateSelect,onFilterSelect:this.trackFilterSelect,onAdvancedFilterAction:this.trackAdvancedFilterAction,dateQuery:b,isoDateFormat:S.k})}}]),n}(v.Component);C.contextType=D.a,t.a=Object(j.withSelect)((function(e){return{defaultDateRange:e(w.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range}}))(C),C.propTypes={advancedFilters:y.a.object,filters:y.a.array,path:y.a.string.isRequired,query:y.a.object,showDatePicker:y.a.bool,report:y.a.string.isRequired}},899:function(e,t,n){"use strict";n.r(t);var r=n(15),o=n.n(r),c=n(32),a=n.n(c),i=n(41),s=n.n(i),l=n(40),u=n.n(l),d=n(59),p=n.n(d),b=n(44),f=n.n(b),m=n(29),h=n.n(m),v=n(42),O=n.n(v),y=n(0),_=n(3),j=n(256),k=n(2),g=n(711),w=n(85),E=n(88),S=n(109),D=n(19),R=n(48),T=n(63),C=n(51),F=(n(770),Object(y.lazy)((function(){return Promise.all([n.e(1),n.e(2),n.e(25)]).then(n.bind(null,910))}))),M=Object(y.lazy)((function(){return Promise.all([n.e(3),n.e(31)]).then(n.bind(null,913))})),P=Object(y.lazy)((function(){return n.e(42).then(n.bind(null,903))})),N=Object(R.applyFilters)("woocommerce_dashboard_default_sections",[{key:"store-performance",component:function(e){return Object(y.createElement)(y.Suspense,{fallback:Object(y.createElement)(T.Spinner,null)},Object(y.createElement)(P,e))},title:Object(_.__)("Performance",'woocommerce'),isVisible:!0,icon:"arrow-right-alt",hiddenBlocks:["coupons/amount","coupons/orders_count","downloads/download_count","taxes/order_tax","taxes/total_tax","taxes/shipping_tax","revenue/shipping","orders/avg_order_value","revenue/refunds","revenue/gross_sales"]},{key:"charts",component:function(e){return Object(y.createElement)(y.Suspense,{fallback:Object(y.createElement)(T.Spinner,null)},Object(y.createElement)(F,e))},title:Object(_.__)("Charts",'woocommerce'),isVisible:!0,icon:"chart-bar",hiddenBlocks:["orders_avg_order_value","avg_items_per_order","products_items_sold","revenue_total_sales","revenue_refunds","coupons_amount","coupons_orders_count","revenue_shipping","taxes_total_tax","taxes_order_tax","taxes_shipping_tax","downloads_download_count"]},{key:"leaderboards",component:function(e){return Object(y.createElement)(y.Suspense,{fallback:Object(y.createElement)(T.Spinner,null)},Object(y.createElement)(M,e))},title:Object(_.__)("Leaderboards",'woocommerce'),isVisible:!0,icon:"editor-ol",hiddenBlocks:["coupons","customers"]}]),x=n(105),I=n.n(x),B=n(121),V=n.n(B),q=n(712);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var L=function(e){O()(n,e);var t=A(n);function n(e){var r;return s()(this,n),(r=t.call(this,e)).onMoveUp=r.onMoveUp.bind(p()(r)),r.onMoveDown=r.onMoveDown.bind(p()(r)),r}return u()(n,[{key:"onMoveUp",value:function(){var e=this.props,t=e.onMove,n=e.onToggle;t(-1),n()}},{key:"onMoveDown",value:function(){var e=this.props,t=e.onMove,n=e.onToggle;t(1),n()}},{key:"render",value:function(){var e=this.props,t=e.onRemove,n=e.isFirst,r=e.isLast,o=e.onTitleBlur,c=e.onTitleChange,a=e.titleInput;return Object(y.createElement)(y.Fragment,null,Object(y.createElement)("div",{className:"woocommerce-ellipsis-menu__item"},Object(y.createElement)(q.a,{label:Object(_.__)("Section Title",'woocommerce'),onBlur:o,onChange:c,required:!0,value:a})),Object(y.createElement)("div",{className:"woocommerce-dashboard-section-controls"},!n&&Object(y.createElement)(T.MenuItem,{isClickable:!0,onInvoke:this.onMoveUp},Object(y.createElement)(S.a,{icon:"arrow-up-alt2",label:Object(_.__)("Move up")}),Object(_.__)("Move up",'woocommerce')),!r&&Object(y.createElement)(T.MenuItem,{isClickable:!0,onInvoke:this.onMoveDown},Object(y.createElement)(S.a,{icon:"arrow-down-alt2",label:Object(_.__)("Move Down")}),Object(_.__)("Move Down",'woocommerce')),Object(y.createElement)(T.MenuItem,{isClickable:!0,onInvoke:t},Object(y.createElement)(S.a,{icon:"trash",label:Object(_.__)("Remove block")}),Object(_.__)("Remove section",'woocommerce'))))}}]),n}(y.Component);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var H=function(e){O()(n,e);var t=U(n);function n(e){var r;s()(this,n),r=t.call(this,e);var o=e.title;return r.state={titleInput:o},r.onToggleHiddenBlock=r.onToggleHiddenBlock.bind(p()(r)),r.onTitleChange=r.onTitleChange.bind(p()(r)),r.onTitleBlur=r.onTitleBlur.bind(p()(r)),r}return u()(n,[{key:"onTitleChange",value:function(e){this.setState({titleInput:e})}},{key:"onTitleBlur",value:function(){var e=this.props,t=e.onTitleUpdate,n=e.title,r=this.state.titleInput;""===r?this.setState({titleInput:n}):t&&t(r)}},{key:"onToggleHiddenBlock",value:function(e){var t=this;return function(){var n=Object(k.xor)(t.props.hiddenBlocks,[e]);t.props.onChangeHiddenBlocks(n)}}},{key:"render",value:function(){var e=this.props,t=e.component,n=V()(e,["component"]),r=this.state.titleInput;return Object(y.createElement)("div",{className:"woocommerce-dashboard-section"},Object(y.createElement)(t,I()({onTitleChange:this.onTitleChange,onTitleBlur:this.onTitleBlur,onToggleHiddenBlock:this.onToggleHiddenBlock,titleInput:r,controls:L},n)))}}]),n}(y.Component),z=n(101),G=n(79),W=n(742),J=n(104),Q=n(745);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var o=h()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f()(this,n)}}var Z=Object(y.lazy)((function(){return Promise.all([n.e(3),n.e(5),n.e(43)]).then(n.bind(null,904))})),$=Object(R.applyFilters)("woocommerce_admin_dashboard_filters",[]),ee=function(e){O()(n,e);var t=Y(n);function n(e){var r;return s()(this,n),(r=t.call(this,e)).state={sections:r.mergeSectionsWithDefaults(e.userPrefSections)},r.onMove=r.onMove.bind(p()(r)),r.updateSection=r.updateSection.bind(p()(r)),r}return u()(n,[{key:"mergeSectionsWithDefaults",value:function(e){if(!e||0===e.length)return N;var t=N.map((function(e){return e.key})),n=e.map((function(e){return e.key})),r=new Set([].concat(a()(n),a()(t))),o=[];return r.forEach((function(t){var n=N.find((function(e){return e.key===t}));if(n){var r=e.find((function(e){return e.key===t}));o.push(X({},n,{},r))}})),o}},{key:"updateSections",value:function(e){this.setState({sections:e}),this.props.updateCurrentUserData({dashboard_sections:e})}},{key:"updateSection",value:function(e,t){var n=this.state.sections.map((function(n){return n.key===e?X({},n,{},t):n}));this.updateSections(n)}},{key:"onChangeHiddenBlocks",value:function(e){var t=this;return function(n){t.updateSection(e,{hiddenBlocks:n})}}},{key:"onSectionTitleUpdate",value:function(e){var t=this;return function(n){Object(G.b)("dash_section_rename",{key:e}),t.updateSection(e,{title:n})}}},{key:"toggleVisibility",value:function(e,t){var n=this;return function(){t&&t();var r=a()(n.state.sections),o=r.findIndex((function(t){return e===t.key})),c=r.splice(o,1).shift();c.isVisible=!c.isVisible,r.push(c),c.isVisible?Object(G.b)("dash_section_add",{key:c.key}):Object(G.b)("dash_section_remove",{key:c.key}),n.updateSections(r)}}},{key:"onMove",value:function(e,t){var n=a()(this.state.sections),r=n.splice(e,1).shift(),o=e+t;if(n[t<0?o:o-1].isVisible||0===e||e===n.length-1){n.splice(o,0,r),this.updateSections(n);var c={key:r.key,direction:t>0?"down":"up"};Object(G.b)("dash_section_order_change",c)}else this.onMove(e,t+t)}},{key:"renderAddMore",value:function(){var e=this,t=this.state.sections.filter((function(e){return!1===e.isVisible}));return 0===t.length?null:Object(y.createElement)(g.a,{position:"top center",className:"woocommerce-dashboard-section__add-more",renderToggle:function(e){var t=e.onToggle,n=e.isOpen;return Object(y.createElement)(w.a,{onClick:t,icon:"plus-alt",title:Object(_.__)("Add more sections",'woocommerce'),"aria-expanded":n})},renderContent:function(n){var r=n.onToggle;return Object(y.createElement)(y.Fragment,null,Object(y.createElement)(T.H,null,Object(_.__)("Dashboard Sections",'woocommerce')),Object(y.createElement)("div",{className:"woocommerce-dashboard-section__add-more-choices"},t.map((function(t){return Object(y.createElement)(E.a,{key:t.key,onClick:e.toggleVisibility(t.key,r),className:"woocommerce-dashboard-section__add-more-btn",title:Object(_.sprintf)(Object(_.__)("Add %s section",'woocommerce'),t.title)},Object(y.createElement)(S.a,{icon:t.icon,size:30}),Object(y.createElement)("span",{className:"woocommerce-dashboard-section__add-more-btn-title"},t.title))}))))}})}},{key:"renderDashboardReports",value:function(){var e=this,t=this.props,n=t.query,r=t.path,o=t.defaultDateRange,c=this.state.sections,a=Object(J.h)(n,o),i=a.period,s=a.compare,l=a.before,u=a.after,d=Object(J.f)(n,o),p={period:i,compare:s,before:l,after:u,primaryDate:d.primary,secondaryDate:d.secondary},b=c.filter((function(e){return e.isVisible})).map((function(e){return e.key}));return Object(y.createElement)(y.Fragment,null,Object(y.createElement)(Q.a,{report:"dashboard",query:n,path:r,dateQuery:p,isoDateFormat:J.k,filters:$}),c.map((function(t,o){return t.isVisible?Object(y.createElement)(H,{component:t.component,hiddenBlocks:t.hiddenBlocks,key:t.key,onChangeHiddenBlocks:e.onChangeHiddenBlocks(t.key),onTitleUpdate:e.onSectionTitleUpdate(t.key),path:r,query:n,title:t.title,onMove:Object(k.partial)(e.onMove,o),onRemove:e.toggleVisibility(t.key),isFirst:t.key===b[0],isLast:t.key===b[b.length-1]}):null})),this.renderAddMore())}},{key:"render",value:function(){var e=this.props,t=e.query,n=e.taskListHidden,r=e.taskListComplete,o=Object(W.e)()&&!n,c=!o||!t.task&&r;return Object(y.createElement)(y.Fragment,null,o&&Object(y.createElement)(y.Suspense,{fallback:Object(y.createElement)(T.Spinner,null)},Object(y.createElement)(Z,{query:t,inline:c})),c&&this.renderDashboardReports())}}]),n}(y.Component);t.default=Object(j.a)(Object(z.a)((function(e){var t=e("wc-api"),n=t.getCurrentUserData,r=t.isGetProfileItemsRequesting,o=t.getOptions,c=t.isGetOptionsRequesting,a=n(),i=e(C.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range,s={userPrefSections:a.dashboard_sections,defaultDateRange:i,requesting:!1};if(Object(W.e)()){var l=o(["woocommerce_task_list_complete","woocommerce_task_list_hidden"]);s.taskListHidden="yes"===Object(k.get)(l,["woocommerce_task_list_hidden"],"no"),s.taskListComplete=Object(k.get)(l,["woocommerce_task_list_complete"],!1),s.requesting=s.requesting||r(),s.requesting=s.requesting||c(["woocommerce_task_list_payments","woocommerce_task_list_hidden"])}return s})),Object(D.withDispatch)((function(e){return{updateCurrentUserData:e("wc-api").updateCurrentUserData}})))(ee)}}]);
