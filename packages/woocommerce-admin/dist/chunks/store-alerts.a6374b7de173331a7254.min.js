(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{119:function(e,t,n){"use strict";var a=n(27),r=n(16),c=n(0);t.a=function(e){var t=e.as,n=void 0===t?"div":t,o=Object(r.a)(e,["as"]);return function(e){var t=e.as,n=void 0===t?"div":t,a=Object(r.a)(e,["as"]);return"function"==typeof a.children?a.children(a):Object(c.createElement)(n,a)}(Object(a.a)({as:n,className:"components-visually-hidden"},o))}},171:function(e,t,n){"use strict";var a=n(0),r=n(10),c=n.n(r),o=n(119);function l(e){var t=e.id,n=e.label,r=e.hideLabelFromVision,i=e.help,s=e.className,u=e.children;return Object(a.createElement)("div",{className:c()("components-base-control",s)},Object(a.createElement)("div",{className:"components-base-control__field"},n&&t&&(r?Object(a.createElement)(o.a,{as:"label",htmlFor:t},n):Object(a.createElement)("label",{className:"components-base-control__label",htmlFor:t},n)),n&&!t&&(r?Object(a.createElement)(o.a,{as:"label"},n):Object(a.createElement)(l.VisualLabel,null,n)),u),!!i&&Object(a.createElement)("p",{id:t+"__help",className:"components-base-control__help"},i))}l.VisualLabel=function(e){var t=e.className,n=e.children;return t=c()("components-base-control__label",t),Object(a.createElement)("span",{className:t},n)},t.a=l},173:function(e,t,n){"use strict";var a=n(11),r=n(0),c=n(53),o=new WeakMap;function l(e){return Object(r.useMemo)((function(){return function(e){var t=o.get(e)||0;return o.set(e,t+1),t}(e)}),[e])}t.a=Object(c.a)((function(e){return function(t){var n=l(e);return Object(r.createElement)(e,Object(a.a)({},t,{instanceId:n}))}}),"withInstanceId")},709:function(e,t,n){"use strict";var a=n(11),r=n(17),c=n(16),o=n(0),l=n(2),i=n(173),s=n(171);t.a=Object(i.a)((function(e){var t=e.help,n=e.instanceId,i=e.label,u=e.multiple,m=void 0!==u&&u,d=e.onChange,b=e.options,p=void 0===b?[]:b,f=e.className,v=e.hideLabelFromVision,h=Object(c.a)(e,["help","instanceId","label","multiple","onChange","options","className","hideLabelFromVision"]),_="inspector-select-control-".concat(n);return!Object(l.isEmpty)(p)&&Object(o.createElement)(s.a,{label:i,hideLabelFromVision:v,id:_,help:t,className:f},Object(o.createElement)("select",Object(a.a)({id:_,className:"components-select-control__input",onChange:function(e){if(m){var t=Object(r.a)(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value}));d(t)}else d(e.target.value)},"aria-describedby":t?"".concat(_,"__help"):void 0,multiple:m},h),p.map((function(e,t){return Object(o.createElement)("option",{key:"".concat(e.label,"-").concat(e.value,"-").concat(t),value:e.value,disabled:e.disabled},e.label)}))))}))},747:function(e,t,n){"use strict";var a=n(758),r=["a","b","em","i","strong","p"],c=["target","href","rel","name","download"];t.a=function(e){return{__html:Object(a.sanitize)(e,{ALLOWED_TAGS:r,ALLOWED_ATTR:c})}}},779:function(e,t,n){},912:function(e,t,n){"use strict";n.r(t);var a=n(41),r=n.n(a),c=n(40),o=n.n(c),l=n(59),i=n.n(l),s=n(44),u=n.n(s),m=n(29),d=n.n(m),b=n(42),p=n.n(b),f=n(0),v=n(3),h=n(88),_=n(709),O=n(80),j=n(85),g=n(10),E=n.n(g),w=n(35),N=n.n(w),y=n(256),A=n(19),x=n(12),k=n.n(x),L=n(63),I=n(26),R=n(101),S=n(24),C=n(747),F=n(1),M=n.n(F);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var D=function(e){p()(n,e);var t=z(n);function n(){return r()(this,n),t.apply(this,arguments)}return o()(n,[{key:"render",value:function(){var e=this.props.hasMultipleAlerts;return Object(f.createElement)("div",{className:"woocommerce-card woocommerce-store-alerts is-loading","aria-hidden":!0},Object(f.createElement)("div",{className:"woocommerce-card__header"},Object(f.createElement)("div",{className:"woocommerce-card__title woocommerce-card__header-item"},Object(f.createElement)("span",{className:"is-placeholder"})),e&&Object(f.createElement)("div",{className:"woocommerce-card__action woocommerce-card__header-item"},Object(f.createElement)("span",{className:"is-placeholder"}))),Object(f.createElement)("div",{className:"woocommerce-card__body"},Object(f.createElement)("div",{className:"woocommerce-store-alerts__message"},Object(f.createElement)("span",{className:"is-placeholder"}),Object(f.createElement)("span",{className:"is-placeholder"})),Object(f.createElement)("div",{className:"woocommerce-store-alerts__actions"},Object(f.createElement)("span",{className:"is-placeholder"}))))}}]),n}(f.Component),P=D;D.propTypes={hasMultipleAlerts:M.a.bool},D.defaultProps={hasMultipleAlerts:!1};var T=n(79);n(779);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var W=function(e){p()(n,e);var t=V(n);function n(e){var a;r()(this,n);var c=(a=t.call(this,e)).props.alerts;return a.state={currentIndex:c?0:null},a.previousAlert=a.previousAlert.bind(i()(a)),a.nextAlert=a.nextAlert.bind(i()(a)),a}return o()(n,[{key:"previousAlert",value:function(e){e.stopPropagation();var t=this.state.currentIndex;t>0&&this.setState({currentIndex:t-1})}},{key:"nextAlert",value:function(e){e.stopPropagation();var t=this.props.alerts,n=this.state.currentIndex;n<t.length-1&&this.setState({currentIndex:n+1})}},{key:"renderActions",value:function(e){var t=this.props,n=t.triggerNoteAction,a=t.updateNote,r=e.actions.map((function(t){return Object(f.createElement)(h.a,{key:t.name,isDefault:!0,isPrimary:t.primary,href:t.url||void 0,onClick:function(){return n(e.id,t.id)}},t.label)})),c=[{value:k()().add(4,"hours").unix().toString(),label:Object(v.__)("Later Today",'woocommerce')},{value:k()().add(1,"day").hour(9).minute(0).second(0).millisecond(0).unix().toString(),label:Object(v.__)("Tomorrow",'woocommerce')},{value:k()().add(1,"week").hour(9).minute(0).second(0).millisecond(0).unix().toString(),label:Object(v.__)("Next Week",'woocommerce')},{value:k()().add(1,"month").hour(9).minute(0).second(0).millisecond(0).unix().toString(),label:Object(v.__)("Next Month",'woocommerce')}],o=e.is_snoozable&&Object(f.createElement)(_.a,{className:"woocommerce-store-alerts__snooze",options:[{label:Object(v.__)("Remind Me Later",'woocommerce'),value:"0"}].concat(c),onChange:function(t){if("0"!==t){var n=c.find((function(e){return e.value===t}));!function(t){a(e.id,{status:"snoozed",date_reminder:t.value});var n={alert_name:e.name,alert_title:e.title,snooze_duration:t.value,snooze_label:t.label};Object(T.b)("store_alert_snooze",n)}({value:t,label:n&&n.label})}}});if(r||o)return Object(f.createElement)("div",{className:"woocommerce-store-alerts__actions"},r,o)}},{key:"render",value:function(){var e=this.props.alerts||[],t=Object(I.g)("alertCount",0,(function(e){return parseInt(e,10)}));if(t>0&&this.props.isLoading)return Object(f.createElement)(P,{hasMultipleAlerts:t>1});if(0===e.length)return null;var n=this.state.currentIndex,a=e.length,r=e[n],c=r.type,o=E()("woocommerce-store-alerts","woocommerce-analytics__card",{"is-alert-error":"error"===c,"is-alert-update":"update"===c});return Object(f.createElement)(L.Card,{title:[r.icon&&Object(f.createElement)(O.a,{key:"icon",icon:r.icon}),Object(f.createElement)(f.Fragment,{key:"title"},r.title)],className:o,action:a>1&&Object(f.createElement)("div",{className:"woocommerce-store-alerts__pagination"},Object(f.createElement)(j.a,{icon:"arrow-left-alt2",onClick:this.previousAlert,disabled:0===n,label:Object(v.__)("Previous Alert",'woocommerce')}),Object(f.createElement)("span",{className:"woocommerce-store-alerts__pagination-label",role:"status","aria-live":"polite"},N()({mixedString:Object(v.__)("{{current /}} of {{total /}}",'woocommerce'),components:{current:Object(f.createElement)(f.Fragment,null,n+1),total:Object(f.createElement)(f.Fragment,null,a)}})),Object(f.createElement)(j.a,{icon:"arrow-right-alt2",onClick:this.nextAlert,disabled:a-1===n,label:Object(v.__)("Next Alert",'woocommerce')}))},Object(f.createElement)("div",{className:"woocommerce-store-alerts__message",dangerouslySetInnerHTML:Object(C.a)(r.content)}),this.renderActions(r))}}]),n}(f.Component);t.default=Object(y.a)(Object(R.a)((function(e){var t=e("wc-api"),n=t.getNotes,a=t.isGetNotesRequesting,r={page:1,per_page:S.d.pageSize,type:"error,update",status:"unactioned"};return{alerts:n(r).filter((function(e){return"unactioned"===e.status})),isLoading:a(r)}})),Object(A.withDispatch)((function(e){var t=e("wc-api");return{triggerNoteAction:t.triggerNoteAction,updateNote:t.updateNote}})))(W)}}]);
