(self.webpackChunk_woocommerce_block_library=self.webpackChunk_woocommerce_block_library||[]).push([[5606],{"./assets/js/base/components/cart-checkout/totals/discount/stories/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,RemovingCoupon:()=>RemovingCoupon,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");var external_STORYBOOK_MODULE_CLIENT_API_=__webpack_require__("@storybook/client-api"),currency=__webpack_require__("./storybook/custom-controls/currency.ts"),custom_controls=__webpack_require__("./storybook/custom-controls/index.ts"),build_module=__webpack_require__("../../node_modules/.pnpm/@wordpress+i18n@4.45.0/node_modules/@wordpress/i18n/build-module/index.js"),loading_mask=__webpack_require__("./assets/js/base/components/loading-mask/index.tsx"),components=__webpack_require__("./packages/components/index.ts"),checkout=__webpack_require__("./packages/checkout/index.js"),utils=__webpack_require__("./assets/js/settings/shared/utils.ts"),jsx_runtime=(__webpack_require__("./assets/js/base/components/cart-checkout/totals/discount/style.scss"),__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"));const filteredCartCouponsFilterArg={context:"summary"},TotalsDiscount=({cartCoupons=[],currency,isRemovingCoupon,removeCoupon,values})=>{const{total_discount:totalDiscount,total_discount_tax:totalDiscountTax}=values,discountValue=parseInt(totalDiscount,10),filteredCartCoupons=(0,checkout.Nk)({arg:filteredCartCouponsFilterArg,filterName:"coupons",defaultValue:cartCoupons});if(!discountValue&&0===filteredCartCoupons.length)return null;const discountTaxValue=parseInt(totalDiscountTax,10),discountTotalValue=(0,utils.PL)("displayCartPricesIncludingTax",!1)?discountValue+discountTaxValue:discountValue;return(0,jsx_runtime.jsx)(components.Zi,{className:"wc-block-components-totals-discount",currency,description:0!==filteredCartCoupons.length&&(0,jsx_runtime.jsx)(loading_mask.A,{screenReaderLabel:(0,build_module.__)("Removing coupon…","woocommerce"),isLoading:isRemovingCoupon,showSpinner:!1,children:(0,jsx_runtime.jsx)("ul",{className:"wc-block-components-totals-discount__coupon-list",children:filteredCartCoupons.map((cartCoupon=>(0,jsx_runtime.jsx)(components.Yx,{className:"wc-block-components-totals-discount__coupon-list-item",text:cartCoupon.label,screenReaderText:(0,build_module.nv)((0,build_module.__)("Coupon: %s","woocommerce"),cartCoupon.label),disabled:isRemovingCoupon,onRemove:()=>{removeCoupon(cartCoupon.code)},radius:"large",ariaLabel:(0,build_module.nv)((0,build_module.__)('Remove coupon "%s"',"woocommerce"),cartCoupon.label)},"coupon-"+cartCoupon.code)))})}),label:discountTotalValue?(0,build_module.__)("Discount","woocommerce"):(0,build_module.__)("Coupons","woocommerce"),value:discountTotalValue?-1*discountTotalValue:"-"})};TotalsDiscount.displayName="TotalsDiscount",TotalsDiscount.__docgenInfo={description:"",methods:[],displayName:"TotalsDiscount",props:{cartCoupons:{defaultValue:{value:"[]",computed:!1},required:!1,tsType:{name:"Array",elements:[{name:"LooselyMustHave",elements:[{name:"CartResponseCouponItemWithLabel"},{name:"union",raw:"'code' | 'label' | 'totals'",elements:[{name:"literal",value:"'code'"},{name:"literal",value:"'label'"},{name:"literal",value:"'totals'"}]}],raw:"LooselyMustHave<\n\tCartResponseCouponItemWithLabel,\n\t'code' | 'label' | 'totals'\n>"}],raw:"LooselyMustHave<\n\tCartResponseCouponItemWithLabel,\n\t'code' | 'label' | 'totals'\n>[]"},description:""},currency:{required:!0,tsType:{name:"Currency"},description:""},isRemovingCoupon:{required:!0,tsType:{name:"boolean"},description:""},removeCoupon:{required:!0,tsType:{name:"signature",type:"function",raw:"( couponCode: string ) => void",signature:{arguments:[{name:"couponCode",type:{name:"string"}}],return:{name:"void"}}},description:""},values:{required:!0,tsType:{name:"LooselyMustHave",elements:[{name:"CartTotalsItem"},{name:"union",raw:"'total_discount' | 'total_discount_tax'",elements:[{name:"literal",value:"'total_discount'"},{name:"literal",value:"'total_discount_tax'"}]}],raw:"LooselyMustHave<\n\tCartTotalsItem,\n\t'total_discount' | 'total_discount_tax'\n>"},description:""}}};const discount=TotalsDiscount;TotalsDiscount.__docgenInfo={description:"",methods:[],displayName:"TotalsDiscount",props:{cartCoupons:{required:!1,tsType:{name:"Array",elements:[{name:"LooselyMustHave",elements:[{name:"CartResponseCouponItemWithLabel"},{name:"union",raw:"'code' | 'label' | 'totals'",elements:[{name:"literal",value:"'code'"},{name:"literal",value:"'label'"},{name:"literal",value:"'totals'"}]}],raw:"LooselyMustHave<\n\tCartResponseCouponItemWithLabel,\n\t'code' | 'label' | 'totals'\n>"}],raw:"LooselyMustHave<\n\tCartResponseCouponItemWithLabel,\n\t'code' | 'label' | 'totals'\n>[]"},description:"",defaultValue:{value:"[]",computed:!1}},currency:{required:!0,tsType:{name:"Currency"},description:""},isRemovingCoupon:{required:!0,tsType:{name:"boolean"},description:""},removeCoupon:{required:!0,tsType:{name:"signature",type:"function",raw:"( couponCode: string ) => void",signature:{arguments:[{type:{name:"string"},name:"couponCode"}],return:{name:"void"}}},description:""},values:{required:!0,tsType:{name:"LooselyMustHave",elements:[{name:"CartTotalsItem"},{name:"union",raw:"'total_discount' | 'total_discount_tax'",elements:[{name:"literal",value:"'total_discount'"},{name:"literal",value:"'total_discount_tax'"}]}],raw:"LooselyMustHave<\n\tCartTotalsItem,\n\t'total_discount' | 'total_discount_tax'\n>"},description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["assets/js/base/components/cart-checkout/totals/discount/index.tsx"]={name:"TotalsDiscount",docgenInfo:TotalsDiscount.__docgenInfo,path:"assets/js/base/components/cart-checkout/totals/discount/index.tsx"});const EXAMPLE_COUPONS=[{code:"AWSMSB",discount_type:"",label:"Awesome Storybook coupon",totals:{...currency.Zt.EUR,total_discount:"5000",total_discount_tax:"250"}},{code:"STONKS",discount_type:"",label:"Most valuable coupon",totals:{...currency.Zt.EUR,total_discount:"10000",total_discount_tax:"1000"}}];function extractValuesFromCoupons(coupons){return coupons.reduce(((acc,curr)=>{const totalDiscount=Number(acc.total_discount)+Number(curr.totals.total_discount),totalDiscountTax=Number(acc.total_discount_tax)+Number(curr.totals.total_discount_tax);return{total_discount:String(totalDiscount),total_discount_tax:String(totalDiscountTax)}}),{total_discount:"0",total_discount_tax:"0"})}const index_stories={title:"Base Components/Totals/Discount",component:discount,argTypes:{currency:currency.VJ,removeCoupon:{action:"Removing coupon with code"}},args:{cartCoupons:EXAMPLE_COUPONS,isRemovingCoupon:!1,values:extractValuesFromCoupons(EXAMPLE_COUPONS)}},Template=args=>{const[{},setArgs]=(0,external_STORYBOOK_MODULE_CLIENT_API_.useArgs)();return(0,jsx_runtime.jsx)(discount,{...args,removeCoupon:code=>{args.removeCoupon(code),setArgs({isRemovingCoupon:!0});const cartCoupons=args.cartCoupons.filter((coupon=>coupon.code!==code)),values=extractValuesFromCoupons(cartCoupons);setTimeout((()=>setArgs({cartCoupons,values,isRemovingCoupon:!1})),custom_controls.LG)}})};Template.displayName="Template";const Default=Template.bind({});Default.args={};const RemovingCoupon=Template.bind({});RemovingCoupon.args={isRemovingCoupon:!0},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"args => {\n  const [{}, setArgs] = useArgs();\n  const removeCoupon = (code: string) => {\n    args.removeCoupon(code);\n    setArgs({\n      isRemovingCoupon: true\n    });\n    const cartCoupons = args.cartCoupons.filter(coupon => coupon.code !== code);\n    const values = extractValuesFromCoupons(cartCoupons);\n    setTimeout(() => setArgs({\n      cartCoupons,\n      values,\n      isRemovingCoupon: false\n    }), INTERACTION_TIMEOUT);\n  };\n  return <Discount {...args} removeCoupon={removeCoupon} />;\n}",...Default.parameters?.docs?.source}}},RemovingCoupon.parameters={...RemovingCoupon.parameters,docs:{...RemovingCoupon.parameters?.docs,source:{originalSource:"args => {\n  const [{}, setArgs] = useArgs();\n  const removeCoupon = (code: string) => {\n    args.removeCoupon(code);\n    setArgs({\n      isRemovingCoupon: true\n    });\n    const cartCoupons = args.cartCoupons.filter(coupon => coupon.code !== code);\n    const values = extractValuesFromCoupons(cartCoupons);\n    setTimeout(() => setArgs({\n      cartCoupons,\n      values,\n      isRemovingCoupon: false\n    }), INTERACTION_TIMEOUT);\n  };\n  return <Discount {...args} removeCoupon={removeCoupon} />;\n}",...RemovingCoupon.parameters?.docs?.source}}};const __namedExportsOrder=["Default","RemovingCoupon"]},"./assets/js/base/components/loading-mask/index.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");var _wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/@wordpress+i18n@4.45.0/node_modules/@wordpress/i18n/build-module/index.js"),clsx__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/clsx@2.1.1/node_modules/clsx/dist/clsx.mjs"),_woocommerce_blocks_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/components/index.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./assets/js/base/components/loading-mask/style.scss"),__webpack_require__("../../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"));const LoadingMask=({children,className,screenReaderLabel,showSpinner=!1,isLoading=!0})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_5__.A)(className,{"wc-block-components-loading-mask":isLoading}),children:[isLoading&&showSpinner&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_woocommerce_blocks_components__WEBPACK_IMPORTED_MODULE_2__.y$,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:(0,clsx__WEBPACK_IMPORTED_MODULE_5__.A)({"wc-block-components-loading-mask__children":isLoading}),"aria-hidden":isLoading,children}),isLoading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("span",{className:"screen-reader-text",children:screenReaderLabel||(0,_wordpress_i18n__WEBPACK_IMPORTED_MODULE_1__.__)("Loading…","woocommerce")})]});LoadingMask.displayName="LoadingMask",LoadingMask.__docgenInfo={description:"",methods:[],displayName:"LoadingMask",props:{showSpinner:{defaultValue:{value:"false",computed:!1},required:!1,tsType:{name:"boolean"},description:""},isLoading:{defaultValue:{value:"true",computed:!1},required:!1,tsType:{name:"boolean"},description:""},children:{required:!1,tsType:{name:"union",raw:"React.ReactNode | React.ReactNode[]",elements:[{name:"ReactReactNode",raw:"React.ReactNode"},{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},screenReaderLabel:{required:!1,tsType:{name:"string"},description:""}}};const __WEBPACK_DEFAULT_EXPORT__=LoadingMask;LoadingMask.__docgenInfo={description:"",methods:[],displayName:"LoadingMask",props:{children:{required:!1,tsType:{name:"union",raw:"React.ReactNode | React.ReactNode[]",elements:[{name:"ReactReactNode",raw:"React.ReactNode"},{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"}]},description:""},className:{required:!1,tsType:{name:"string"},description:""},screenReaderLabel:{required:!1,tsType:{name:"string"},description:""},showSpinner:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isLoading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["assets/js/base/components/loading-mask/index.tsx"]={name:"LoadingMask",docgenInfo:LoadingMask.__docgenInfo,path:"assets/js/base/components/loading-mask/index.tsx"})},"./storybook/custom-controls/currency.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{qx:()=>currencies,Zt:()=>currenciesAPIShape,VJ:()=>currencyControl});var tslib_es6=__webpack_require__("../../node_modules/.pnpm/tslib@2.6.3/node_modules/tslib/tslib.es6.mjs"),dist_es2015=__webpack_require__("../../node_modules/.pnpm/dot-case@3.0.4/node_modules/dot-case/dist.es2015/index.js");var map_keys=__webpack_require__("./assets/js/base/utils/map-keys.ts");const snakeCaseKeys=obj=>(0,map_keys.d)(obj,((_,key)=>function snakeCase(input,options){return void 0===options&&(options={}),(0,dist_es2015.a)(input,(0,tslib_es6.Cl)({delimiter:"_"},options))}(key))),currencies={EUR:{code:"EUR",symbol:"€",thousandSeparator:".",decimalSeparator:",",minorUnit:2,prefix:"",suffix:"€"},USD:{code:"USD",symbol:"$",thousandSeparator:",",decimalSeparator:".",minorUnit:2,prefix:"$",suffix:""}},currenciesAPIShape=Object.fromEntries(Object.entries(currencies).map((([key,value])=>[key,snakeCaseKeys(value)]))),currencyControl={control:"select",options:currencies,mapping:Object.keys(currencies)}},"./storybook/custom-controls/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{LG:()=>INTERACTION_TIMEOUT});const INTERACTION_TIMEOUT=1500},"./assets/js/base/components/cart-checkout/totals/discount/style.scss":()=>{},"./assets/js/base/components/loading-mask/style.scss":()=>{}}]);